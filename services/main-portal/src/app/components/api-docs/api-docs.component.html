<!-- Header -->
<header class="docs-header">
  <div class="container">
    <button class="back-button" (click)="goBack()">
      <i class="fas fa-arrow-left"></i>
      Back to Hub
    </button>
    <h1 class="docs-title">API Documentation</h1>
    <p class="docs-subtitle">Complete reference for all InvictaWeb APIs</p>
  </div>
</header>

<!-- Main Content -->
<main class="docs-content">
  <div class="container">
    
    <!-- Overview Section -->
    <section class="overview-section">
      <h2>Overview</h2>
      <div class="overview-grid">
        <div class="overview-card">
          <h3>Authentication</h3>
          <p>All API endpoints require HTTP Basic Authentication using your guild credentials.</p>
          <code>Authorization: Basic [base64(username:password)]</code>
        </div>
        
        <div class="overview-card">
          <h3>Response Format</h3>
          <p>All responses are in JSON format with consistent error handling.</p>
          <code>{"success": true, "data": {...}, "message": "..."}</code>
        </div>
        
        <div class="overview-card">
          <h3>Rate Limiting</h3>
          <p>Standard rate limits apply: 100 requests per minute per user.</p>
          <code>X-RateLimit-Remaining: 99</code>
        </div>
        
        <div class="overview-card">
          <h3>Base URL</h3>
          <p>All API endpoints are relative to your InvictaWeb domain.</p>
          <code>https://your-domain.com/api/</code>
        </div>
      </div>
    </section>

    <!-- API Services -->
    <section class="services-section">
      <h2>API Services</h2>
      
      <div *ngFor="let service of services" class="service-section">
        <div class="service-header">
          <h3>{{ service.name }}</h3>
          <p>{{ service.description }}</p>
          <div class="base-url">
            <strong>Base URL:</strong> <code>{{ service.baseUrl }}</code>
          </div>
        </div>
        
        <div class="endpoints-list">
          <div *ngFor="let endpoint of service.endpoints" class="endpoint-card">
            <div class="endpoint-header">
              <span class="method-badge" [style.background-color]="getMethodColor(endpoint.method)">
                {{ endpoint.method }}
              </span>
              <code class="endpoint-path">{{ endpoint.path }}</code>
            </div>
            
            <div class="endpoint-content">
              <p class="endpoint-description">{{ endpoint.description }}</p>
              
              <!-- Parameters -->
              <div *ngIf="endpoint.parameters && endpoint.parameters.length > 0" class="parameters-section">
                <h4>Parameters</h4>
                <ul class="parameters-list">
                  <li *ngFor="let param of endpoint.parameters">
                    <code>{{ param }}</code>
                  </li>
                </ul>
              </div>
              
              <!-- Example -->
              <div *ngIf="endpoint.example" class="example-section">
                <h4>Example Request</h4>
                <pre class="code-block"><code>{{ endpoint.example }}</code></pre>
              </div>
              
              <!-- Response -->
              <div *ngIf="endpoint.response" class="response-section">
                <h4>Example Response</h4>
                <pre class="code-block response"><code>{{ endpoint.response }}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Usage Examples -->
    <section class="examples-section">
      <h2>Common Use Cases</h2>
      
      <div class="examples-grid">
        <div class="example-card">
          <h3>Track a Named Mob Kill</h3>
          <p>Record when a named mob was killed to track respawn timers.</p>
          <pre class="code-block"><code>curl -X POST -u invicta:password \
  -H "Content-Type: application/json" \
  -d '{"mob_id": 42, "killed_at": "2024-01-01T15:30:00Z"}' \
  https://your-domain.com/named_mobs_api.php</code></pre>
        </div>
        
        <div class="example-card">
          <h3>Add Resource Node</h3>
          <p>Add a new resource node location to the map.</p>
          <pre class="code-block"><code>curl -X POST -u invicta:password \
  -d "x=1250&y=850&type=iron&respawn_time=1800" \
  https://your-domain.com/api.php</code></pre>
        </div>
        
        <div class="example-card">
          <h3>Get All Active Timers</h3>
          <p>Retrieve all currently active named mob timers.</p>
          <pre class="code-block"><code>curl -u invicta:password \
  "https://your-domain.com/named_mobs_api.php?action=active"</code></pre>
        </div>
      </div>
    </section>

    <!-- Error Codes -->
    <section class="errors-section">
      <h2>Error Codes</h2>
      <div class="errors-table">
        <div class="error-row">
          <div class="error-code">400</div>
          <div class="error-message">Bad Request - Invalid parameters</div>
        </div>
        <div class="error-row">
          <div class="error-code">401</div>
          <div class="error-message">Unauthorized - Invalid credentials</div>
        </div>
        <div class="error-row">
          <div class="error-code">403</div>
          <div class="error-message">Forbidden - Insufficient permissions</div>
        </div>
        <div class="error-row">
          <div class="error-code">404</div>
          <div class="error-message">Not Found - Resource doesn't exist</div>
        </div>
        <div class="error-row">
          <div class="error-code">429</div>
          <div class="error-message">Too Many Requests - Rate limit exceeded</div>
        </div>
        <div class="error-row">
          <div class="error-code">500</div>
          <div class="error-message">Internal Server Error - Contact support</div>
        </div>
      </div>
    </section>
  </div>
</main>
